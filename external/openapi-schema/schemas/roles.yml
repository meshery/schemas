roleHolderRequest:
    type: object
    properties:
      role_names:
        $ref: ../common.yml#/roleNames
      email:
        $ref: ../common.yml#/email
    required: [
      role_names,
      email
    ]

role:
  type: object
  properties:
    id:
      $ref: ../common.yml#/id
    user_id:
      $ref: ../common.yml#/user_id
    username:
      $ref: ../common.yml#/username
    email:
      $ref: ../common.yml#/email
    first_name:
      $ref: ../common.yml#/text
      description: First Name
    last_name:
      $ref: ../common.yml#/text
      description: Last Name
    status:
      $ref: ../common.yml#/status
    role_names:
      $ref: ../common.yml#/roleNames
    created_at:
      $ref: ../common.yml#/time
    updated_at:
      $ref: ../common.yml#/time
    last_login_time:
      $ref: ../common.yml#/time
    deleted_at:
      $ref: ../common.yml#/time
    prefs:
      $ref: '#/email_preference'
  required: [
    id,
    user_id,
    username,
    email,
    first_name,
    last_name,
    status,
    role_names,
    created_at,
    updated_at,
    last_login_time,
    deleted_at,
  ]

/system/roles:
  get:
    tags:
      - roles
    operationId: GetAllRoles
    summary: Get All Roles
    description: Get All supported roles
    responses:
      '200':
        description: Get all roles
        content:
          application/json:
            schema:
              type: array
              items:
                type: string
      '401':
        $ref: ../responses.yml#/401
      '500':
        $ref: ../responses.yml#/500
  
  post:
    tags:
      - roles
    operationId: AddRoleHolder
    summary: Assign role
    description: Assign role to user
    requestBody:
      description: Body for assigning role to the user
      required: true
      content:
        application/json:
          schema:
            $ref: '#/roleHolderRequest'
    responses:
      '200':
         $ref: ../responses.yml#/200
      '401':
        $ref: ../responses.yml#/401
      '500':
        $ref: ../responses.yml#/500
  
/system/roles/edit:
  post:
    tags:
      - roles
    operationId: EditRoleHolder
    summary: Edit Role
    description: Edit role of user
    requestBody:
      description: Body for editing role of the user
      required: true
      content:
        application/json:
          schema:
            $ref: '#/role'
    responses:
      '200':
         $ref: ../responses.yml#/200
      '400':
        $ref: ../responses.yml#/400
      '401':
        $ref: ../responses.yml#/401
      '500':
        $ref: ../responses.yml#/500

/system/roles/edit/bulk:
  post:
    tags:
      - roles
    operationId: BulkEditRoleHolder
    summary: Bulk Edit Role
    description: Edit roles of user in bulk
    requestBody:
      description: Body for editing role of the users in bulk
      required: true
      content:
        application/json:
          schema:
            type: array
            items:
              $ref: '#/role'
    responses:
      '201':
         $ref: ../responses.yml#/201
      '400':
        $ref: ../responses.yml#/400
      '401':
        $ref: ../responses.yml#/401
      '500':
        $ref: ../responses.yml#/500

/system/roles/{id}:
  delete:
    tags:
      - roles
    operationId: DeleteRole
    summary: Delete Role
    description: Edit roles of user in bulk
    parameters:
      - $ref: ../parameters.yml#/id
        required: true
    responses:
      '201':
        description: Deleted roles
        content:
          application/json:
            schema:
              type: array
              items:
                $ref: '#/role'
      '401':
        $ref: ../responses.yml#/401
      '500':
        $ref: ../responses.yml#/500