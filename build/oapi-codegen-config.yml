# oapi-codegen-config.yml - Legacy/Example Configuration for Manual Code Generation
#
# ⚠️  STATUS: LEGACY/EXAMPLE - NOT USED BY AUTOMATED BUILD
#
# DESCRIPTION:
#   This is an example/template configuration file for manual oapi-codegen usage.
#   It is documented in CONTRIBUTING.md for developers who want to manually
#   generate Go code for specific schemas.
#
#   The automated build process (generate-golang.sh) uses openapi.config.yml instead.
#
# KNOWN ISSUES:
#   - Contains outdated paths (e.g., "v1alphav3" should be "v1alpha3")
#   - Import mappings may be out of sync with current schema structure
#   - The 'generate' section at the bottom is commented out/incomplete
#
# FOR AUTOMATED BUILDS:
#   Use `make build` or `make golang-generate` which uses openapi.config.yml
#
# FOR MANUAL GENERATION (as documented in CONTRIBUTING.md):
#   1. Update this file with your specific package/output settings
#   2. Run: oapi-codegen -config oapi-codegen-config.yml <schema_file>
#
# SEE ALSO:
#   - build/openapi.config.yml - Primary config used by automated builds
#   - CONTRIBUTING.md - Manual code generation workflow documentation
#
# yaml-language-server: $schema=https://raw.githubusercontent.com/deepmap/oapi-codegen/HEAD/configuration-schema.json
package: schemas

import-mapping:
  "./core.yml": "github.com/meshery/schemas/models/core"
  "./common/core.yml": "github.com/meshery/schemas/models/core"
  "../core.json": "github.com/meshery/schemas/models/core"
  "./common/parameters.yml": "github.com/meshery/schemas/models/core"

  # v1alpha1
  "../v1alpha1/capability/capability.json": "github.com/meshery/schemas/models/v1alpha1/capability"
  "../v1alpha1/catalog_data.json": "github.com/meshery/schemas/models/v1alpha1/catalog_data.json"

  # v1alpha3
  "../v1alphav3/relationship.json": "github.com/meshery/schemas/models/v1alphav3/relationship"
  "../v1alphav3/selector.json": "github.com/meshery/schemas/models/v1alphav3/selector"

  # v1beta1
  "../v1beta1/model.json": "github.com/meshery/schemas/models/v1beta1/model"
  "../v1beta1/component.json": "github.com/meshery/schemas/models/v1beta1/model"
  "../v1beta1/connection.json": "github.com/meshery/schemas/models/v1beta1/connection"
  "../v1beta1/design.json": "github.com/meshery/schemas/models/v1beta1/design"
  # "../v1beta1/credential.json": "github.com/meshery/schemas/models/v1beta1/credential"

generate:
  - input: schemas/constructs/v1alpha1/capability/capability.json
    output: models/v1alpha1/capability
    package: capabilities
    generate:
      models: true
  - input: schemas/constructs/v1alpha1/catalog_data.json
    output: models/v1alpha1/catalog_data
    package: catalog_data
    generate:
      models: true
  - input: schemas/constructs/v1alphav3/relationship.json
    output: models/v1alphav3/relationship
    package: relationships
    generate:
      models: true
  - input: schemas/constructs/v1alphav3/selector.json
    output: models/v1alphav3/selector
    package: selectors
    generate:
      models: true
  - input: schemas/constructs/v1beta1/model.json
    output: models/v1beta1/model
    package: models
    generate:
      models: true
  - input: schemas/constructs/v1beta1/component.json
    output: models/v1beta1/component
    package: components
    generate:
      models: true
  - input: schemas/constructs/v1beta1/connection.json
    output: models/v1beta1/connection
    package: connections
    generate:
      models: true
  - input: schemas/constructs/v1beta1/design.json
    output: models/v1beta1/design
    package: designs
    generate:
      models: true
  # - input: schemas/constructs/v1beta1/credential.json
  #   output: models/v1beta1/credential
  #   package: credentials
  #   generate:
  #     models: true
# # Update the "output" and "include-tags" based on the resource for which code generation needs to be invoked.
# generate:
#   models: true

# output: models/v1alpha3/relationship/relationship.go
# output-options:
#   # name-normalizer: ToCamelCaseWithInitialisms
#   skip-prune: true
#   include-tags:
#   - patterns

