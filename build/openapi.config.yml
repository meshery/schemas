# openapi.config.yml - oapi-codegen Configuration for Go Code Generation
#
# DESCRIPTION:
#   Configuration file for oapi-codegen, defining how OpenAPI schemas are
#   converted to Go structs. This is the primary configuration used by
#   generate-golang.sh for generating Go models.
#
# WHAT IT CONFIGURES:
#   - Package name for generated Go code
#   - Import mappings for cross-schema references
#   - Generation options (models only, no client/server code)
#   - Output options like tag exclusions and pruning behavior
#
# USAGE:
#   Used by oapi-codegen via:
#   oapi-codegen --config build/openapi.config.yml --package <pkg> -o <output> <input>
#
# IMPORT MAPPINGS:
#   Maps schema $ref paths to Go import paths, enabling proper cross-package
#   references when schemas reference other schemas.
#
# NOTE:
#   This file is used by generate-golang.sh. For schema-specific overrides,
#   the --package flag is passed directly to oapi-codegen.
#
# yaml-language-server: $schema=https://raw.githubusercontent.com/oapi-codegen/oapi-codegen/HEAD/configuration-schema.json
package: v1beta1

import-mapping:
  "./core.yml": "github.com/meshery/schemas/models/core"
  "./common/core.yml": "github.com/meshery/schemas/models/core"
  "../../core.json": "github.com/meshery/schemas/models/core"
  "./common/parameters.yml": "github.com/meshery/schemas/models/core"

  # v1alpha1
  "../v1alpha1/capability/capability.json": "github.com/meshery/schemas/models/v1alpha1/capability"
  "../v1alpha1/catalog_data.json": "github.com/meshery/schemas/models/v1alpha1/catalog_data"

  # v1alpha3
  "../v1alpha3/relationship/relationship.json": "github.com/meshery/schemas/models/v1alpha3/relationship"
  "../v1alpha3/selector/selector.json": "github.com/meshery/schemas/models/v1alpha3/selector"

  # v1beta1
  "../v1beta1/model.json": "github.com/meshery/schemas/models/v1beta1/model"
  "../v1beta1/component.json": "github.com/meshery/schemas/models/v1beta1/component"
  "../v1beta1/connection.json": "github.com/meshery/schemas/models/v1beta1/connection"
  "../v1beta1/design.json": "github.com/meshery/schemas/models/v1beta1/design"
  # "../v1beta1/credential.json": "github.com/meshery/schemas/models/v1beta1/credential"
generate:
  models: true
output-options:
  # NOTE that this is only required for the `Unreferenced` type
  skip-prune: true
  exclude-tags:
    - "internal"
